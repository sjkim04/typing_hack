var Typing;!function(t){t.KeyInfo=class{},t.BSKEY_CODE=8}(Typing||(Typing={})),function(t){t.TMEiji=class{constructor(){this.TypingMethodName="TMEiji",this.CODE_CHARS_TABLE={32:[" "," "],48:["0",""],49:["1","!"],50:["2",'"'],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","&"],55:["7","'"],56:["8","("],57:["9",")"],59:[":","*"],65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],96:["0",""],97:["1",""],98:["2",""],99:["3",""],100:["4",""],101:["5",""],102:["6",""],103:["7",""],104:["8",""],105:["9",""],106:["*",""],107:["+",""],109:["-",""],110:[".",""],111:["/",""],186:[":","*"],187:[";","+"],188:[",","<"],189:["-","="],190:[".",">"],191:["/","?"],192:["@","`"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["^","~"],226:["\\","_"]},this.CHARS_CODE_TABLE={0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57"," ":"32",":":"186",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",";":"187",",":"188","-":"189",".":"190","/":"191","@":"192","[":"219","]":"221","^":"222","\\":"226"},this.SHIFT_CHARS_CODE_TABLE={" ":"32","":"111","!":"49",'"':"50","#":"51",$:"52","%":"53","&":"54","'":"55","(":"56",")":"57","*":"186",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90","+":"187","<":"188","=":"189",">":"190","?":"191","`":"192","{":"219","|":"220","}":"221","~":"222",_:"226"},this.REV_CODE_TABLE={},this.SHIFT_REV_CODE_TABLE={},this.CHAR_PATTERN_TABLE={" ":[" "],0:["0"],1:["1"],2:["2"],3:["3"],4:["4"],5:["5"],6:["6"],7:["7"],8:["8"],9:["9"],":":[":"],A:["A","a"],B:["B","b"],C:["C","c"],D:["D","d"],E:["E","e"],F:["F","f"],G:["G","g"],H:["H","h"],I:["I","i"],J:["J","j"],K:["K","k"],L:["L","l"],M:["M","m"],N:["N","n"],O:["O","o"],P:["P","p"],Q:["Q","q"],R:["R","r"],S:["S","s"],T:["T","t"],U:["U","u"],V:["V","v"],W:["W","w"],X:["X","x"],Y:["Y","y"],Z:["Z","z"],a:["A","a"],b:["B","b"],c:["C","c"],d:["D","d"],e:["E","e"],f:["F","f"],g:["G","g"],h:["H","h"],i:["I","i"],j:["J","j"],k:["K","k"],l:["L","l"],m:["M","m"],n:["N","n"],o:["O","o"],p:["P","p"],q:["Q","q"],r:["R","r"],s:["S","s"],t:["T","t"],u:["U","u"],v:["V","v"],w:["W","w"],x:["X","x"],y:["Y","y"],z:["Z","z"],"*":["*"],"+":["+"],"-":["-"],".":["."],"/":["/"],";":[";"],",":[","],"@":["@"],"[":["["],"\\":["\\"],"]":["]"],"^":["^"],"!":["!"],'"':['"'],"#":["#"],$:["$"],"%":["%"],"&":["&"],"'":["'"],"(":["("],")":[")"],"<":["<"],"=":["="],">":[">"],"?":["?"],"`":["`"],"{":["{"],"|":["|"],"}":["}"],"~":["~"],_:["_"]},this.REV_CODE_TABLE=this.CHARS_CODE_TABLE,this.SHIFT_REV_CODE_TABLE=this.SHIFT_CHARS_CODE_TABLE}isUndoCode(t){return!1}canUndoChar(t,s){return!1}charToKeyInfo(s){var e=null,n=!1;if(!(e=this.REV_CODE_TABLE[s])){if(!(e=this.SHIFT_REV_CODE_TABLE[s]))return null;n=!0}var r=new t.KeyInfo;return r.code=e,r.chara=s,r.shifted=n,r}codeToKeyInfo(s,e,n){var r=new t.KeyInfo;return r.code=s,this.CODE_CHARS_TABLE[s]?r.chara=this.CODE_CHARS_TABLE[s][e?1:0]:r.chara=null,r.shifted=e,r.location=n,r}getAnswers(t,s){for(var e=[],n=0;n<t.typingchar.length;n++){var r,i=t.typingchar.charAt(n);s.smallBigLetter?((r=[]).push(i),e.push(r.concat())):this.CHAR_PATTERN_TABLE[i.toUpperCase()]?e.push(this.CHAR_PATTERN_TABLE[i.toUpperCase()].concat()):((r=[]).push(i),e.push(r.concat()))}return e}getInputCharNum(t){return t.length}isReturnAnswerStrings(){return!0}checkQuestionData(t){for(var s=0;s<t.typingchar.length;s++){var e=t.typingchar.charAt(s);if(!this.CHAR_PATTERN_TABLE[e])return alert("蝠城｡後ョ繝ｼ繧ｿ縺ｮ"+s+"逡ｪ逶ｮ縺ｫ繧ｨ繝ｩ繝ｼ縺ゅｊ"),!1}return!0}}}(Typing||(Typing={})),function(t){t.TMKana=class{constructor(){for(var t in this.TypingMethodName="TMKana",this.CODE_CHARS_TABLE={32:["縲","縲"],48:["繧�","繧�"],49:["縺ｬ","縺ｬ"],50:["縺ｵ","縺ｵ"],51:["縺�","縺�"],52:["縺�","縺�"],53:["縺�","縺�"],54:["縺�","縺�"],55:["繧�","繧�"],56:["繧�","繧�"],57:["繧�","繧�"],59:["縺�","縺�"],65:["縺｡","縺｡"],66:["縺�","縺�"],67:["縺�","縺�"],68:["縺�","縺�"],69:["縺�","縺�"],70:["縺ｯ","縺ｯ"],71:["縺�","縺�"],72:["縺�","縺�"],73:["縺ｫ","縺ｫ"],74:["縺ｾ","縺ｾ"],75:["縺ｮ","縺ｮ"],76:["繧�","繧�"],77:["繧�","繧�"],78:["縺ｿ","縺ｿ"],79:["繧�","繧�"],80:["縺�","縺�"],81:["縺�","縺�"],82:["縺�","縺�"],83:["縺ｨ","縺ｨ"],84:["縺�","縺�"],85:["縺ｪ","縺ｪ"],86:["縺ｲ","縺ｲ"],87:["縺ｦ","縺ｦ"],88:["縺�","縺�"],89:["繧�","繧�"],90:["縺､","縺｣"],96:["0",""],97:["1",""],98:["2",""],99:["3",""],100:["4",""],101:["5",""],102:["6",""],103:["7",""],104:["8",""],105:["9",""],106:["*",""],107:["+",""],109:["-",""],110:[".",""],111:["/",""],186:["縺�","縺�"],187:["繧�","繧�"],188:["縺ｭ","縲�"],189:["縺ｻ","縺ｻ"],190:["繧�","縲�"],191:["繧�","繝ｻ"],192:["繧�","繧�"],219:["繧�","縲�"],220:["繝ｼ","繝ｼ"],221:["繧","縲�"],222:["縺ｸ","縺ｸ"],226:["繧�","繧�"]},this.REV_CODE_TABLE={},this.SHIFT_REV_CODE_TABLE={},this.CHAR_PATTERN_TABLE={"繧�":["繧�"],"繧�":["繧�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺｡":["縺｡"],"縺､":["縺､"],"縺ｦ":["縺ｦ"],"縺ｨ":["縺ｨ"],"縺ｪ":["縺ｪ"],"縺ｫ":["縺ｫ"],"縺ｬ":["縺ｬ"],"縺ｭ":["縺ｭ"],"縺ｮ":["縺ｮ"],"縺ｯ":["縺ｯ"],"縺ｲ":["縺ｲ"],"縺ｵ":["縺ｵ"],"縺ｸ":["縺ｸ"],"縺ｻ":["縺ｻ"],"縺ｾ":["縺ｾ"],"縺ｿ":["縺ｿ"],"繧":["繧"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"縺�":["縺�"],"繧�":["繧�"],"繧�":["繧�"],"繧�":["繧�"],"縺｣":["縺｣"],"縺�":["縺九�"],"縺�":["縺阪�"],"縺�":["縺上�"],"縺�":["縺代�"],"縺�":["縺薙�"],"縺�":["縺輔�"],"縺�":["縺励�"],"縺�":["縺吶�"],"縺�":["縺帙�"],"縺�":["縺昴�"],"縺�":["縺溘�"],"縺｢":["縺｡繧�"],"縺･":["縺､繧�"],"縺ｧ":["縺ｦ繧�"],"縺ｩ":["縺ｨ繧�"],"縺ｰ":["縺ｯ繧�"],"縺ｳ":["縺ｲ繧�"],"縺ｶ":["縺ｵ繧�"],"縺ｹ":["縺ｸ繧�"],"縺ｼ":["縺ｻ繧�"],"縺ｱ":["縺ｯ繧�"],"縺ｴ":["縺ｲ繧�"],"縺ｷ":["縺ｵ繧�"],"縺ｺ":["縺ｸ繧�"],"縺ｽ":["縺ｻ繧�"],"縲�":["縲�"],"縲�":["縲�"],"繝ｼ":["繝ｼ"],"縲�":["縲�"],"縲�":["縲�"],"��":["*"],"��":["+"],"��":["-"],"��":["."],"��":["/"],"��":["0"],"��":["1"],"��":["2"],"��":["3"],"��":["4"],"��":["5"],"��":["6"],"��":["7"],"��":["8"],"��":["9"],"繧�":["繧�"],"繝ｴ":["縺��"],"繝ｵ":["縺�"],"繝ｶ":["縺�"],"繧｢":["縺�"],"繧､":["縺�"],"繧ｦ":["縺�"],"繧ｨ":["縺�"],"繧ｪ":["縺�"],"繧ｫ":["縺�"],"繧ｭ":["縺�"],"繧ｯ":["縺�"],"繧ｱ":["縺�"],"繧ｳ":["縺�"],"繧ｵ":["縺�"],"繧ｷ":["縺�"],"繧ｹ":["縺�"],"繧ｻ":["縺�"],"繧ｽ":["縺�"],"繧ｿ":["縺�"],"繝�":["縺｡"],"繝�":["縺､"],"繝�":["縺ｦ"],"繝�":["縺ｨ"],"繝�":["縺ｪ"],"繝�":["縺ｫ"],"繝�":["縺ｬ"],"繝�":["縺ｭ"],"繝�":["縺ｮ"],"繝�":["縺ｯ"],"繝�":["縺ｲ"],"繝�":["縺ｵ"],"繝�":["縺ｸ"],"繝�":["縺ｻ"],"繝�":["縺ｾ"],"繝�":["縺ｿ"],"繝�":["繧"],"繝｡":["繧�"],"繝｢":["繧�"],"繝､":["繧�"],"繝ｦ":["繧�"],"繝ｨ":["繧�"],"繝ｩ":["繧�"],"繝ｪ":["繧�"],"繝ｫ":["繧�"],"繝ｬ":["繧�"],"繝ｭ":["繧�"],"繝ｯ":["繧�"],"繝ｲ":["繧�"],"繝ｳ":["繧�"],"繧｡":["縺�"],"繧｣":["縺�"],"繧･":["縺�"],"繧ｧ":["縺�"],"繧ｩ":["縺�"],"繝｣":["繧�"],"繝･":["繧�"],"繝ｧ":["繧�"],"繝�":["縺｣"],"繧ｬ":["縺九�"],"繧ｮ":["縺阪�"],"繧ｰ":["縺上�"],"繧ｲ":["縺代�"],"繧ｴ":["縺薙�"],"繧ｶ":["縺輔�"],"繧ｸ":["縺励�"],"繧ｺ":["縺吶�"],"繧ｼ":["縺帙�"],"繧ｾ":["縺昴�"],"繝":["縺溘�"],"繝�":["縺｡繧�"],"繝�":["縺､繧�"],"繝�":["縺ｦ繧�"],"繝�":["縺ｨ繧�"],"繝�":["縺ｯ繧�"],"繝�":["縺ｲ繧�"],"繝�":["縺ｵ繧�"],"繝�":["縺ｸ繧�"],"繝�":["縺ｻ繧�"],"繝�":["縺ｯ繧�"],"繝�":["縺ｲ繧�"],"繝�":["縺ｵ繧�"],"繝�":["縺ｸ繧�"],"繝�":["縺ｻ繧�"],"繝ｮ":["繧�"]},this.CODE_CHARS_TABLE)this.REV_CODE_TABLE[this.CODE_CHARS_TABLE[t][0]]=t,this.SHIFT_REV_CODE_TABLE[this.CODE_CHARS_TABLE[t][1]]=t}isUndoCode(t){return!1}canUndoChar(t,s){return!1}charToKeyInfo(s){var e=null,n=!1;if(!(e=this.REV_CODE_TABLE[s])){if(!(e=this.SHIFT_REV_CODE_TABLE[s]))return null;n=!0}var r=new t.KeyInfo;return r.code=e,r.chara=s,r.shifted=n,r}codeToKeyInfo(s,e,n){var r=new t.KeyInfo;return r.code=s,this.CODE_CHARS_TABLE[s]?r.chara=this.CODE_CHARS_TABLE[s][e?1:0]:r.chara=null,r.shifted=e,r.location=n,r}getAnswers(t,s){for(var e=[],n=0;n<t.typingchar.length;n++){var r=t.typingchar.charAt(n);if(this.CHAR_PATTERN_TABLE[r])e.push(this.CHAR_PATTERN_TABLE[r].concat());else{var i=[];i.push(r),e.push(i)}}return e}getInputCharNum(t){for(var s,e=0,n=0;n<t.length;n++)"繧�"!=(s=t.substring(n,n+1))&&"繧�"!=s&&e++;return e}isReturnAnswerStrings(){return!1}checkQuestionData(t){for(var s=0;s<t.typingchar.length;s++){var e=t.typingchar.charAt(s);if(!this.CHAR_PATTERN_TABLE[e])return alert("蝠城｡後ョ繝ｼ繧ｿ縺ｮ"+s+"逡ｪ逶ｮ縺ｫ繧ｨ繝ｩ繝ｼ縺ゅｊ"),!1}return!0}}}(Typing||(Typing={})),function(t){t.TMRoman=class{constructor(){for(var t in this.TypingMethodName="TMRoman",this.alphabetToKanaNum={},this.CODE_CHARS_TABLE={32:[" "," "],48:["0",""],49:["1","!"],50:["2",'"'],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","&"],55:["7","'"],56:["8","("],57:["9",")"],59:[":","*"],65:["A","A"],66:["B","B"],67:["C","C"],68:["D","D"],69:["E","E"],70:["F","F"],71:["G","G"],72:["H","H"],73:["I","I"],74:["J","J"],75:["K","K"],76:["L","L"],77:["M","M"],78:["N","N"],79:["O","O"],80:["P","P"],81:["Q","Q"],82:["R","R"],83:["S","S"],84:["T","T"],85:["U","U"],86:["V","V"],87:["W","W"],88:["X","X"],89:["Y","Y"],90:["Z","Z"],96:["0",""],97:["1",""],98:["2",""],99:["3",""],100:["4",""],101:["5",""],102:["6",""],103:["7",""],104:["8",""],105:["9",""],106:["*",""],107:["+",""],109:["-",""],110:[".",""],111:["/",""],186:[":","*"],187:[";","+"],188:[",","<"],189:["-","="],190:[".",">"],191:["/","?"],192:["@","`"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["^","~"],226:["\\","_"]},this.CHARS_CODE_TABLE={0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57"," ":"32",":":"59",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",";":"187",",":"188","-":"189",".":"190","/":"191","@":"192","[":"219","]":"221","^":"222","\\":"226"},this.SHIFT_CHARS_CODE_TABLE={" ":"32","":"111","!":"49",'"':"50","#":"51",$:"52","%":"53","&":"54","'":"55","(":"56",")":"57","*":"186",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90","+":"187","<":"188","=":"189",">":"190","?":"191","`":"192","{":"219","|":"220","}":"221","~":"222",_:"226"},this.REV_CODE_TABLE={},this.SHIFT_REV_CODE_TABLE={},this.CHAR_PATTERN_TABLE={"縺�":["A"],"縺�":["I","YI"],"縺�":["U","WU","WHU"],"縺�":["E"],"縺�":["O"],"縺�":["KA","CA"],"縺�":["KI"],"縺�":["KU","CU","QU"],"縺�":["KE"],"縺�":["KO","CO"],"縺�":["SA"],"縺�":["SI","CI","SHI"],"縺�":["SU"],"縺�":["SE","CE"],"縺�":["SO"],"縺�":["TA"],"縺｡":["TI","CHI"],"縺､":["TU","TSU"],"縺ｦ":["TE"],"縺ｨ":["TO"],"縺ｪ":["NA"],"縺ｫ":["NI"],"縺ｬ":["NU"],"縺ｭ":["NE"],"縺ｮ":["NO"],"縺ｯ":["HA"],"縺ｲ":["HI"],"縺ｵ":["HU","FU"],"縺ｸ":["HE"],"縺ｻ":["HO"],"縺ｾ":["MA"],"縺ｿ":["MI"],"繧":["MU"],"繧�":["ME"],"繧�":["MO"],"繧�":["YA"],"繧�":["YU"],"繧�":["YO"],"繧�":["RA"],"繧�":["RI"],"繧�":["RU"],"繧�":["RE"],"繧�":["RO"],"繧�":["WA"],"繧�":["WO"],"繧�":["NN","N"],"縺�":["LA","XA"],"縺�":["LI","LYI","XI","XYI"],"縺�":["LU","XU"],"縺�":["LE","LYE","XE","XYE"],"縺�":["LO","XO"],"繧�":["LYA","XYA"],"繧�":["LYU","XYU"],"繧�":["LYO","XYO"],"縺｣":["LTU","LTSU","XTU"],"縺�＜":["WI","WHI"],"縺�∞":["WE","WHE"],"縺上＝":["QA","QWA","KWA"],"縺上＜":["QI","QWI","QYI"],"縺上∞":["QE","QWE","QYE"],"縺上♂":["QO","QWO"],"縺励ｃ":["SHA","SYA"],"縺励ｅ":["SHU","SYU"],"縺励∞":["SHE","SYE"],"縺励ｇ":["SHO","SYO"],"縺倥ｃ":["JA","JYA","ZYA"],"縺倥ｅ":["JU","JYU","ZYU"],"縺倥∞":["JE","JYE","ZYE"],"縺倥ｇ":["JO","JYO","ZYO"],"縺｡繧�":["CHA","CYA","TYA"],"縺｡縺�":["CHI","TYI"],"縺｡繧�":["CHU","CYU","TYU"],"縺｡縺�":["CHE","CYE","TYE"],"縺｡繧�":["CHO","CYO","TYO"],"縺ｵ縺�":["FA","FWA"],"縺ｵ縺�":["FI","FYI","FWI"],"縺ｵ縺�":["FE","FYE","FWE"],"縺ｵ縺�":["FO","FWO"],"縺�":["GA"],"縺�":["GI"],"縺�":["GU"],"縺�":["GE"],"縺�":["GO"],"縺�":["ZA"],"縺�":["ZI","JI"],"縺�":["ZU"],"縺�":["ZE"],"縺�":["ZO"],"縺�":["DA"],"縺｢":["DI"],"縺･":["DU"],"縺ｧ":["DE"],"縺ｩ":["DO"],"縺ｰ":["BA"],"縺ｳ":["BI"],"縺ｶ":["BU"],"縺ｹ":["BE"],"縺ｼ":["BO"],"縺ｱ":["PA"],"縺ｴ":["PI"],"縺ｷ":["PU"],"縺ｺ":["PE"],"縺ｽ":["PO"],"縲�":["."],"縲�":[","],"繝ｼ":["-"],"縺阪ｃ":["KYA"],"縺阪ｅ":["KYU"],"縺阪ｇ":["KYO"],"縺弱ｃ":["GYA"],"縺弱ｅ":["GYU"],"縺弱ｇ":["GYO"],"縺ｫ繧�":["NYA"],"縺ｫ繧�":["NYU"],"縺ｫ繧�":["NYO"],"縺ｲ繧�":["HYA"],"縺ｲ繧�":["HYU"],"縺ｲ繧�":["HYO"],"縺ｳ繧�":["BYA"],"縺ｳ繧�":["BYU"],"縺ｳ繧�":["BYO"],"縺ｴ繧�":["PYA"],"縺ｴ繧�":["PYU"],"縺ｴ繧�":["PYO"],"縺ｿ繧�":["MYA"],"縺ｿ繧�":["MYU"],"縺ｿ繧�":["MYO"],"繧翫ｃ":["RYA"],"繧翫ｅ":["RYU"],"繧翫ｇ":["RYO"],"縲�":["["],"縲�":["]"],"��":["*"],"��":["+"],"��":["-"],"��":["."],"��":["/"],"��":["0"],"��":["1"],"��":["2"],"��":["3"],"��":["4"],"��":["5"],"��":["6"],"��":["7"],"��":["8"],"��":["9"],"縺�∞":["YE"],"縺�＝":["WHA"],"縺�♂":["WHO","UXO"],"縺阪＜":["KYI"],"縺阪∞":["KYE"],"縺弱＜":["GYI"],"縺弱∞":["GYE"],"縺上≦":["QWU"],"縺上ｃ":["QYA"],"縺上ｅ":["QYU"],"縺上ｇ":["QYO"],"縺舌＝":["GWA"],"縺舌＜":["GWI"],"縺舌≦":["GWU"],"縺舌∞":["GWE"],"縺舌♂":["GWO"],"縺励＜":["SYI"],"縺倥＜":["JYI","ZYI"],"縺吶＝":["SWA"],"縺吶＜":["SWI"],"縺吶≦":["SWU"],"縺吶∞":["SWE"],"縺吶♂":["SWO"],"縺｢縺�":["DYI"],"縺｢縺�":["DYE"],"縺｢繧�":["DYA"],"縺｢繧�":["DYU"],"縺｢繧�":["DYO"],"縺､縺�":["TSA"],"縺､縺�":["TSI"],"縺､縺�":["TSE"],"縺､縺�":["TSO"],"縺ｦ縺�":["THI"],"縺ｦ縺�":["THE"],"縺ｦ繧�":["THA"],"縺ｦ繧�":["THU"],"縺ｦ繧�":["THO"],"縺ｧ縺�":["DHI","DEXI"],"縺ｧ縺�":["DHE"],"縺ｧ繧�":["DHA"],"縺ｧ繧�":["DHU"],"縺ｧ繧�":["DHO"],"縺ｨ縺�":["TWA"],"縺ｨ縺�":["TWI"],"縺ｨ縺�":["TWU"],"縺ｨ縺�":["TWE"],"縺ｨ縺�":["TWO"],"縺ｩ縺�":["DWA"],"縺ｩ縺�":["DWI"],"縺ｩ縺�":["DWU"],"縺ｩ縺�":["DWE"],"縺ｩ縺�":["DWO"],"縺ｫ縺�":["NYI"],"縺ｫ縺�":["NYE"],"縺ｲ縺�":["HYI"],"縺ｲ縺�":["HYE"],"縺ｳ縺�":["BYI"],"縺ｳ縺�":["BYE"],"縺ｴ縺�":["PYI"],"縺ｴ縺�":["PYE"],"縺ｵ縺�":["FWU"],"縺ｵ繧�":["FYA"],"縺ｵ繧�":["FYU"],"縺ｵ繧�":["FYO"],"縺ｿ縺�":["MYI"],"縺ｿ縺�":["MYE"],"繧翫＜":["RYI"],"繧翫∞":["RYE"],"繧�":["LWA","XWA"],"繝ｴ縺�":["VA"],"繝ｴ縺�":["VI","VYI"],"繝ｴ縺�":["VE","VYE"],"繝ｴ縺�":["VO"],"繝ｴ繧�":["VYA"],"繝ｴ繧�":["VYU"],"繝ｴ繧�":["VYO"],"繝ｴ":["VU"],"繝ｵ":["LKA","XKA"],"繝ｶ":["LKE","XKE"],"繧｢":["A"],"繧､":["I","YI"],"繧ｦ":["U","WU","WHU"],"繧ｨ":["E"],"繧ｪ":["O"],"繧ｫ":["KA","CA"],"繧ｭ":["KI"],"繧ｯ":["KU","CU","QU"],"繧ｱ":["KE"],"繧ｳ":["KO","CO"],"繧ｵ":["SA"],"繧ｷ":["SI","CI","SHI"],"繧ｹ":["SU"],"繧ｻ":["SE","CE"],"繧ｽ":["SO"],"繧ｿ":["TA"],"繝�":["TI","CHI"],"繝�":["TU","TSU"],"繝�":["TE"],"繝�":["TO"],"繝�":["NA"],"繝�":["NI"],"繝�":["NU"],"繝�":["NE"],"繝�":["NO"],"繝�":["HA"],"繝�":["HI"],"繝�":["HU","FU"],"繝�":["HE"],"繝�":["HO"],"繝�":["MA"],"繝�":["MI"],"繝�":["MU"],"繝｡":["ME"],"繝｢":["MO"],"繝､":["YA"],"繝ｦ":["YU"],"繝ｨ":["YO"],"繝ｩ":["RA"],"繝ｪ":["RI"],"繝ｫ":["RU"],"繝ｬ":["RE"],"繝ｭ":["RO"],"繝ｯ":["WA"],"繝ｲ":["WO"],"繝ｳ":["NN","N"],"繧｡":["LA","XA"],"繧｣":["LI","LYI","XI","XYI"],"繧･":["LU","XU"],"繧ｧ":["LE","LYE","XE","XYE"],"繧ｩ":["LO","XO"],"繝｣":["LYA","XYA"],"繝･":["LYU","XYU"],"繝ｧ":["LYO","XYO"],"繝�":["LTU","LTSU","XTU"],"繧ｦ繧｣":["WI","WHI"],"繧ｦ繧ｧ":["WE","WHE"],"繧ｯ繧｡":["QA","QWA","KWA"],"繧ｯ繧｣":["QI","QWI","QYI"],"繧ｯ繧ｧ":["QE","QWE","QYE"],"繧ｯ繧ｩ":["QO","QWO"],"繧ｷ繝｣":["SHA","SYA"],"繧ｷ繝･":["SHU","SYU"],"繧ｷ繧ｧ":["SHE","SYE"],"繧ｷ繝ｧ":["SHO","SYO"],"繧ｸ繝｣":["JA","JYA","ZYA"],"繧ｸ繝･":["JU","JYU","ZYU"],"繧ｸ繧ｧ":["JE","JYE","ZYE"],"繧ｸ繝ｧ":["JO","JYO","ZYO"],"繝√Ε":["CHA","CYA","TYA"],"繝√ぅ":["CHI","TYI"],"繝√Η":["CHU","CYU","TYU"],"繝√ぉ":["CHE","CYE","TYE"],"繝√Ι":["CHO","CYO","TYO"],"繝輔ぃ":["FA","FWA"],"繝輔ぅ":["FI","FYI","FWI"],"繝輔ぉ":["FE","FYE","FWE"],"繝輔か":["FO","FWO"],"繧ｬ":["GA"],"繧ｮ":["GI"],"繧ｰ":["GU"],"繧ｲ":["GE"],"繧ｴ":["GO"],"繧ｶ":["ZA"],"繧ｸ":["ZI","JI"],"繧ｺ":["ZU"],"繧ｼ":["ZE"],"繧ｾ":["ZO"],"繝":["DA"],"繝�":["DI"],"繝�":["DU"],"繝�":["DE"],"繝�":["DO"],"繝�":["BA"],"繝�":["BI"],"繝�":["BU"],"繝�":["BE"],"繝�":["BO"],"繝�":["PA"],"繝�":["PI"],"繝�":["PU"],"繝�":["PE"],"繝�":["PO"],"繧ｭ繝｣":["KYA"],"繧ｭ繝･":["KYU"],"繧ｭ繝ｧ":["KYO"],"繧ｮ繝｣":["GYA"],"繧ｮ繝･":["GYU"],"繧ｮ繝ｧ":["GYO"],"繝九Ε":["NYA"],"繝九Η":["NYU"],"繝九Ι":["NYO"],"繝偵Ε":["HYA"],"繝偵Η":["HYU"],"繝偵Ι":["HYO"],"繝薙Ε":["BYA"],"繝薙Η":["BYU"],"繝薙Ι":["BYO"],"繝斐Ε":["PYA"],"繝斐Η":["PYU"],"繝斐Ι":["PYO"],"繝溘Ε":["MYA"],"繝溘Η":["MYU"],"繝溘Ι":["MYO"],"繝ｪ繝｣":["RYA"],"繝ｪ繝･":["RYU"],"繝ｪ繝ｧ":["RYO"],"繧､繧ｧ":["YE"],"繧ｦ繧｡":["WHA"],"繧ｦ繧ｩ":["WHO","UXO"],"繧ｭ繧｣":["KYI"],"繧ｭ繧ｧ":["KYE"],"繧ｮ繧｣":["GYI"],"繧ｮ繧ｧ":["GYE"],"繧ｯ繧･":["QWU"],"繧ｯ繝｣":["QYA"],"繧ｯ繝･":["QYU"],"繧ｯ繝ｧ":["QYO"],"繧ｰ繧｡":["GWA"],"繧ｰ繧｣":["GWI"],"繧ｰ繧･":["GWU"],"繧ｰ繧ｧ":["GWE"],"繧ｰ繧ｩ":["GWO"],"繧ｷ繧｣":["SYI"],"繧ｸ繧｣":["JYI","ZYI"],"繧ｹ繧｡":["SWA"],"繧ｹ繧｣":["SWI"],"繧ｹ繧･":["SWU"],"繧ｹ繧ｧ":["SWE"],"繧ｹ繧ｩ":["SWO"],"繝ゅぅ":["DYI"],"繝ゅぉ":["DYE"],"繝ゅΕ":["DYA"],"繝ゅΗ":["DYU"],"繝ゅΙ":["DYO"],"繝�ぃ":["TSA"],"繝�ぅ":["TSI"],"繝�ぉ":["TSE"],"繝�か":["TSO"],"繝�ぅ":["THI"],"繝�ぉ":["THE"],"繝�Ε":["THA"],"繝�Η":["THU"],"繝�Ι":["THO"],"繝�ぅ":["DHI","DEXI"],"繝�ぉ":["DHE"],"繝�Ε":["DHA"],"繝�Η":["DHU"],"繝�Ι":["DHO"],"繝医ぃ":["TWA"],"繝医ぅ":["TWI"],"繝医ぇ":["TWU"],"繝医ぉ":["TWE"],"繝医か":["TWO"],"繝峨ぃ":["DWA"],"繝峨ぅ":["DWI"],"繝峨ぇ":["DWU"],"繝峨ぉ":["DWE"],"繝峨か":["DWO"],"繝九ぅ":["NYI"],"繝九ぉ":["NYE"],"繝偵ぅ":["HYI"],"繝偵ぉ":["HYE"],"繝薙ぅ":["BYI"],"繝薙ぉ":["BYE"],"繝斐ぅ":["PYI"],"繝斐ぉ":["PYE"],"繝輔ぇ":["FWU"],"繝輔Ε":["FYA"],"繝輔Η":["FYU"],"繝輔Ι":["FYO"],"繝溘ぅ":["MYI"],"繝溘ぉ":["MYE"],"繝ｪ繧｣":["RYI"],"繝ｪ繧ｧ":["RYE"],"繝ｮ":["LWA","XWA"],"繝ｴ繧｡":["VA"],"繝ｴ繧｣":["VI","VYI"],"繝ｴ繧ｧ":["VE","VYE"],"繝ｴ繧ｩ":["VO"],"繝ｴ繝｣":["VYA"],"繝ｴ繝･":["VYU"],"繝ｴ繝ｧ":["VYO"]},this.REV_CODE_TABLE=this.CHARS_CODE_TABLE,this.SHIFT_REV_CODE_TABLE=this.SHIFT_CHARS_CODE_TABLE,this.CHAR_PATTERN_TABLE)for(var s in this.CHAR_PATTERN_TABLE[t])this.alphabetToKanaNum[this.CHAR_PATTERN_TABLE[t][s]]=t.length}isUndoCode(s){return s===t.BSKEY_CODE}canUndoChar(t,s){var e=t.pop(),n=e+s;return this.getInputCharNum(n)==this.getInputCharNum(e)}getAnswers(t,s){return this.kanaToRomans(t.typingchar)}kanaToRomans(t){for(var s=[],e=0;e<t.length;e++){var n=t.substr(e,1),r=t.substr(e+1,1),i=t.substr(e+2,1),h=t.substr(e+3,1),a=n?this.CHAR_PATTERN_TABLE[n]:null,u=r?this.CHAR_PATTERN_TABLE[r]:null,o=i?this.CHAR_PATTERN_TABLE[i]:null,l=(h&&this.CHAR_PATTERN_TABLE[h],n&&r?this.CHAR_PATTERN_TABLE[n+r]:null),E=r&&i?this.CHAR_PATTERN_TABLE[r+i]:null,A=(i&&h&&this.CHAR_PATTERN_TABLE[i+h],[]);if(l){for(var T=0;T<l.length;T++)A.push(l[T]);for(var d=0;d<a.length;d++)for(var Y=0;Y<u.length;Y++)A.push(a[d]+u[Y]);e+=1}else if("繧�"==n||"繝ｳ"==n)if(null!=u&&u[0].match(/^(A|I|U|E|O|N|Y)/))A.push("NN");else if(E){for(var C=0;C<E.length;C++)A.push("N"+E[C]);for(Y=0;Y<u.length;Y++)for(var c=0;c<o.length;c++)A.push("N"+u[Y]+o[c]);e+=2}else A.push("N");else if("縺｣"==n||"繝�"==n)if(null==u||u[0].match(/^(A|I|U|E|O|N)/)||1==u[0].length)A.push("LTU"),A.push("LTSU"),A.push("XTU");else if(E){for(C=0;C<E.length;C++)A.push(E[C].substr(0,1)+E[C]),A.push("LTU"+E[C]),A.push("LTSU"+E[C]),A.push("XTU"+E[C]);for(Y=0;Y<u.length;Y++)for(c=0;c<o.length;c++)A.push(u[Y].substr(0,1)+u[Y]+o[c]),A.push("LTU"+u[Y]+o[c]),A.push("LTSU"+u[Y]+o[c]),A.push("XTU"+u[Y]+o[c]);e+=2}else{for(Y=0;Y<u.length;Y++)A.push(u[Y].substr(0,1)+u[Y]),A.push("LTU"+u[Y]),A.push("LTSU"+u[Y]),A.push("XTU"+u[Y]);e+=1}else for(d=0;d<a.length;d++)A.push(a[d]);s.push(A)}return s}codeToKeyInfo(s,e,n){var r=new t.KeyInfo;return r.code=s,this.CODE_CHARS_TABLE[s]?r.chara=this.CODE_CHARS_TABLE[s][e?1:0]:r.chara=null,r.shifted=e,r.location=n,r}charToKeyInfo(s){var e=null,n=!1;if(!(e=this.REV_CODE_TABLE[s])){if(!(e=this.SHIFT_REV_CODE_TABLE[s]))return null;n=!0}var r=new t.KeyInfo;return r.code=e,r.chara=s,r.shifted=n,r}getInputCharNum(t){for(var s="",e=0,n=0;n<t.length;n++)s+=t.substring(n,n+1),this.alphabetToKanaNum[s]?"N"==s.substring(0,1)?n==t.length-1?(e+=1,s=""):2==s.length&&"N"==s.substring(1,2)?(e+=1,s=""):2==s.length&&s.substring(1,2).match(/^(A|I|U|E|O)/)&&(e+=this.alphabetToKanaNum[s],s=""):(e+=this.alphabetToKanaNum[s],s=""):"N"==s.substring(0,1)?(e+=1,s=s.slice(1)):2!=s.length||s.substring(1,2).match(/^(A|I|U|E|O)/)||s.substring(0,1)==s.substring(1,2)&&(e+=1,s=s.slice(1));return e}isReturnAnswerStrings(){return!1}checkQuestionData(t){for(var s=0;s<t.typingchar.length;s++){var e=t.typingchar.charAt(s);if(!this.CHAR_PATTERN_TABLE[e])return alert("蝠城｡後ョ繝ｼ繧ｿ縺ｮ縲�"+t.typingchar+"縲阪↓繧ｨ繝ｩ繝ｼ縺ゅｊ"),!1}return!0}}}(Typing||(Typing={})),function(t){class s{constructor(){this.inputCharCount=0,this.TypedQesCharCount=0,this.correctCount=0,this.mistakeCount=0}}t.ResultBase=s;class e extends s{constructor(){super(...arguments),this.noMissFlag=!0}}t.Result=e;class n extends s{constructor(){super(...arguments),this.questionCount=0,this.noMissAnswerCount=0}}t.ResultTotal=n;t.TypingEngine=class{constructor(t,s,r,i){if(this.dataIndex=[],this.dataIndexForRepeat=[],this.result=new e,this.resultTotal=new n,this.method=null,this.keyeventFlag=!0,this.decrementTypeNum=0,this.method=t,this.datas=s,this.handlers=r,this.params=i||{shuffle:!1,loop:!1,smallBigLetter:!1,errCheck:!1,typedCharacter:"0"},i.errCheck)for(var h=0;h<this.datas.length;h++)if(!this.method.checkQuestionData(this.datas[h]))return;for(h=0;h<this.datas.length;h++)this.dataIndex[h]=h;if(this.params.shuffle)for(h=0;h<this.datas.length;h++){var a=Math.floor(Math.random()*this.dataIndex.length),u=this.dataIndex[h];this.dataIndex[h]=this.dataIndex[a],this.dataIndex[a]=u}this.params.loop&&(this.dataIndexForRepeat=this.dataIndex.concat())}get inputedString(){return this.method.isReturnAnswerStrings()&&!this.params.smallBigLetter&&this.inputBuffer.length>0?this.currentData.typingchar.substring(0,this.inputBuffer.length):this.inputBuffer}get guideString(){var t=this.inputedString;if(this.method.isReturnAnswerStrings()&&!this.params.smallBigLetter)t=this.currentData.typingchar;else for(var s in this.answerStringss)t+=this.answerStringss[s][0];return t}get nextKey(){if(this.guideString.length===this.inputedString.length)return null;var t=this.guideString.substr(this.inputedString.length,1);return this.method.charToKeyInfo(t)}start(){this.next();var t=this;this.handleKeydownForUnbind=(s=>(t.handleKeydown(s),!1)),window.addEventListener("keydown",this.handleKeydownForUnbind);var s=this;this.handleKeyupForUnbind=(t=>(s.handleThisKeyup(t),!1)),window.addEventListener("keyup",this.handleKeyupForUnbind)}next(){this.result=new e;var t=this.dataIndex.shift();this.currentData=this.datas[t],this.inputBuffer="",this.inputUndoBuffers=[],this.answerStringssUndoBuffers=[],null!=this.currentData?(this.currentData.cnttypedfont&&(this.cnttypedArr=this.currentData.cnttypedfont.split(",")),this.result.TypedQesCharCount=0,this.answerStringss=this.method.getAnswers(this.currentData,this.params),this.handlers.handleQuestionStart&&this.handlers.handleQuestionStart(this.currentData,this.nextKey)):this.params&&(this.params.loop?(this.dataIndex=this.dataIndexForRepeat.concat(),this.next()):this.handlers.handleTypingEnd&&this.handlers.handleTypingEnd(this.resultTotal))}end(){return window.removeEventListener("keydown",this.handleKeydownForUnbind),this.handleKeydownForUnbind=null,window.removeEventListener("keyup",this.handleKeyupForUnbind),this.handleKeyupForUnbind=null,this.getTotalResult()}getTotalResult(){return this.resultTotal}enableKey(t){this.keyeventFlag=t}getInputCharCount(){return this.result.inputCharCount}getTypedQesCharCount(){return this.result.TypedQesCharCount}handleKeydown(s){var n=s.keyCode;if(-1!=window.navigator.userAgent.toLowerCase().indexOf("firefox"))switch(s.key){case"'":case"/":s.preventDefault()}switch(s.key){case"-":n=189;break;case"'":n=55;break;case"^":n=222;break;case"ﾂ･":n=220;break;case"@":n=192;break;case";":n=187;break;case"_":n=226;break;case"[":n=219;break;case":":n=186;break;case"]":n=221}var r=this.method.codeToKeyInfo(n,s.shiftKey,s.location);if(this.handlers.handleKeyDown&&!this.handlers.handleKeyDown(r))return!1;if(s.keyCode==t.BSKEY_CODE&&s.preventDefault(),this.method.isUndoCode(s.keyCode))return 0===this.inputUndoBuffers.length?void(this.handlers.handleSpecialKey&&this.handlers.handleSpecialKey(this.currentData,r)):void(this.method.canUndoChar(this.inputUndoBuffers.concat(),this.inputBuffer.charAt(this.inputBuffer.length-1))?(this.inputBuffer=this.inputUndoBuffers.pop(),this.answerStringss=this.answerStringssUndoBuffers.pop(),this.result.correctCount--,this.resultTotal.correctCount--,this.handlers.handleUndoKey&&this.handlers.handleUndoKey(this.currentData,this.nextKey,this.result)):this.handlers.handleSpecialKey&&this.handlers.handleSpecialKey(this.currentData,r));if(null!=r.chara){if(this.answerStringss&&!(this.answerStringss.length<=0)){var i=this.judge(r.chara);if(i<0)this.result.mistakeCount++,this.resultTotal.mistakeCount++,this.result.noMissFlag=!1,this.handlers.handleMistakeKeydown&&this.handlers.handleMistakeKeydown(this.currentData,r,this.result);else{this.result.correctCount++,this.resultTotal.correctCount++;var h=this.result.inputCharCount,a=this.currentData.typingchar.substr(this.result.inputCharCount);this.inputBuffer.endsWith("CHI")&&(!a.startsWith("縺｡縺�")&&a.startsWith("縺｡")||!a.startsWith("繝√ぅ")&&a.startsWith("繝�"))&&this.decrementTypeNum++,this.result.inputCharCount=this.method.getInputCharNum(this.inputBuffer),this.result.inputCharCount-=this.decrementTypeNum,this.isNaninunenoHead(this.inputBuffer,this.currentData.typingchar.substr(0,this.result.inputCharCount))&&this.result.inputCharCount--,"N"===this.inputBuffer.slice(-1)&&"N"===this.guideString.substr(this.inputBuffer.length,1)&&"N"!==this.guideString.substr(this.inputBuffer.length-2,1)&&this.result.inputCharCount--,"繧�"!=this.guideString.substr(this.inputBuffer.length,1)&&"繧�"!=this.guideString.substr(this.inputBuffer.length,1)||(this.result.inputCharCount=this.result.inputCharCount-1),h!==this.result.inputCharCount&&"2"==this.params.typedCharacter&&(this.result.TypedQesCharCount=Number(this.cnttypedArr[this.result.inputCharCount-1])),this.resultTotal.inputCharCount+=this.result.inputCharCount-h,null==this.nextKey&&this.result.noMissFlag&&this.resultTotal.noMissAnswerCount++,this.handlers.handleCorrectKeydown&&this.handlers.handleCorrectKeydown(this.currentData,r,this.nextKey,this.result),0==i&&(this.resultTotal.questionCount++,this.decrementTypeNum=0,this.handlers.handleQuestionEnd&&this.handlers.handleQuestionEnd(this.currentData,this.result),this.result=new e)}}}else this.handlers.handleSpecialKey&&this.handlers.handleSpecialKey(this.currentData,r)}isNaninunenoHead(t,s){const e=t.slice(-1);if(!e)return!1;if("N"!=e)return!1;const n=s.slice(-1);return!!n&&!!n.match(/(縺ｪ|縺ｫ|縺ｬ|縺ｭ|縺ｮ)/)}handleThisKeyup(t){if(this.keyeventFlag){var s=t.keyCode;switch(t.key){case"-":s=189;break;case"'":s=55;break;case"^":s=222;break;case"ﾂ･":s=220;break;case"@":s=192;break;case";":s=187;break;case"_":s=226;break;case"[":s=219;break;case":":s=186;break;case"]":s=221}var e=this.method.codeToKeyInfo(s,t.shiftKey,t.location);this.handlers.handleKeyUp&&this.handlers.handleKeyUp(e)}}pushUndoBuffer(){this.inputUndoBuffers.push(this.inputBuffer);var t=[];for(var s in this.answerStringss){var e=this.answerStringss[s].concat();t.push(e)}this.answerStringssUndoBuffers.push(t)}judge(t){for(var s=0;s<this.answerStringss[0].length;s++)if(this.answerStringss[0][s].substr(0,1)===t){this.pushUndoBuffer(),this.inputBuffer+=t;for(var e=0;e<this.answerStringss[0].length;e++)if(this.answerStringss[0][e].substr(0,1)===t){if(this.answerStringss[0][e]=this.answerStringss[0][e].substr(1),0===this.answerStringss[0][e].length){this.answerStringss.shift();break}}else this.answerStringss[0].splice(e,1),e--;return this.answerStringss.length}return-1}}}(Typing||(Typing={}));
